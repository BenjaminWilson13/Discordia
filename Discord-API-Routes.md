<!--!!START SILENT -->

# Meetup Clone

<!--!!END -->
<!--!!ADD -->
<!-- # `<name of application here>` -->
<!--!!END_ADD -->

## Database Schema Design

<!--!!START SILENT -->

        https://dbdiagram.io/d/6470f4d67764f72fcfebb2aa

<!--!!END -->
<!--!!ADD -->
<!-- `<insert database schema design here>` -->
<!--!!END_ADD -->

## API Documentation

## USER AUTHENTICATION/AUTHORIZATION

### All endpoints that require authentication

All endpoints that require a current user to be logged in.

- Request: endpoints that require authentication
- Error Response: Require authentication

  - Status Code: 401
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Authentication required"
    }
    ```

### All endpoints that require proper authorization

All endpoints that require authentication and the current user does not have the
correct role(s) or permission(s).

- Request: endpoints that require proper authorization
- Error Response: Require proper authorization

  - Status Code: 403
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Forbidden"
    }
    ```

### Get the Current User

Returns the information about the current user that is logged in.

- Require Authentication: true
- Request
  <!--!!START SILENT -->

  - Method: GET
  - URL: /api/session
    <!--!!END -->
    <!--!!ADD -->
    <!-- * Method: ? -->
    <!-- * URL: ? -->
    <!--!!END_ADD -->
  - Body: none

- Successful Response when there is a logged in user

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith"
      }
    }
    ```

- Successful Response when there is no logged in user

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "user": null
    }
    ```

### Log In a User

Logs in a current user with valid credentials and returns the current user's
information.

- Require Authentication: false
- Request
  <!--!!START SILENT -->

  - Method: POST
  - URL: /api/session
    <!--!!END -->
    <!--!!ADD -->
    <!-- * Method: ? -->
    <!-- * URL: ? -->
    <!--!!END_ADD -->
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "email": "john.smith@gmail.com",
      "password": "secret password"
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith"
      }
    }
    ```

- Error Response: Invalid credentials

  - Status Code: 401
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Invalid credentials"
    }
    ```

- Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "email": "Email is required",
        "password": "Password is required"
      }
    }
    ```

### Sign Up a User

Creates a new user, logs them in as the current user, and returns the current
user's information.

- Require Authentication: false
- Request
  <!--!!START SILENT -->

  - Method: POST
  - URL: /api/users
    <!--!!END -->
    <!--!!ADD -->
    <!-- * Method: ? -->
    <!-- * URL: ? -->
    <!--!!END_ADD -->
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "firstName": "John",
      "lastName": "Smith",
      "email": "john.smith@gmail.com",
      "username": "JohnSmith",
      "password": "secret password"
    }
    ```

- Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith"
      }
    }
    ```

- Error response: User already exists with the specified email

  - Status Code: 500
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "User already exists",
      "errors": {
        "email": "User with that email already exists"
      }
    }
    ```

- Error response: User already exists with the specified username

  - Status Code: 500
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "User already exists",
      "errors": {
        "username": "User with that username already exists"
      }
    }
    ```

- Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "email": "Invalid email",
        "firstName": "First Name is required",
        "lastName": "Last Name is required"
      }
    }
    ```

## SERVERS

### Create a server

Create a new server. User that creates the server will automatically be designated as the owner.

- Require Authentication: true
- Require Proper Authentication: true
- Request
  - Method: POST
  - Content-Type: application/json
  - URL: /api/server
  - Body:

```json
{
  "name": "new server!",
  "imageURL": "something.com",
  "userId": 1
}
```

- Response

  - Successful response when user is logged in:
    - Status Code: 201
    - Headers:
    - Content-Type: application/json
    - Body:

```json
{
  "id": 1,
  "name": "new server!",
  "imageURL": "something.com",
  "ownerId": 1,
  "createdAt": "06/01/2023"
}
```

### Delete a server

User must be owner of the server in order to delete.

- Require Authentication: true
- Require Proper Authentication: true
- Request

  - Method: DELETE
  - Content-Type: application/json
  - URL: /api/servers/:serverId
  - Body: None

- Response
  - Successful response when user is owner of the server
    - Status Code: 202
    - Headers:
    - Content-Type: application/json
    - Body:

```json
{
  "message": "Successfully deleted!"
}
```

### Edit a server

Update the name or image link of a specific server. Only the owner can update the server.

- Require Authentication: true
- Require Proper Authentication: true
- Request
  - Method: PUT
  - URL: /api/servers/:serverId
  - Body:

```json
{
  "name": "new name",
  "imageURL": "new.image.url.com"
}
```

Successful Response when there is a logged in user that is the owner of the server

- Status Code: 202
- Headers:
  - Content-Type: application/json
- Body:

  ```json
  {
    "id": 1,
    "name": "new name!",
    "imageURL": "new.image.url.com"
  }
  ```

### Get all servers

Returns a list of all available servers.

- Require Authentication: true
- Request

  - Method: GET
  - URL: /api/servers
  - Body: none

- Successful Response when there is a logged in user

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "Servers": {
        [
          {
            "id":1,
            "name":"First server!!!",
            "owner_id":1,
            "created_at":"05/30/2023"
          },
          {
            "id":2,
            "name":"second server :(",
            "owner_id":2,
            "created_at":"06/01/2023"
          }


        ]
    }
    }
    ```

## SERVER USERS

### Add a user to a server

Adds a user to a server as a member.

- Require Authentication: true
- User must have the role "owner" or "admin" to add users to a server.
- Request

  - Method: POST
  - Headers: application/json
  - URL: /api/servers/:serverId/users
  - Body:

    ```json
    {
      "userId": 1,
      "role": "user" //owner, admin, user
    }
    ```

- Successful Response when user is Owner or Admin

  - Status Code: 200
  - Headers: application/json
  - Body:

    ```json
    {
      "user_id": 1,
      "server_id": 1,
      "role": "user", //user or admin
      "created_at": "06/01/2023"
    }
    ```

### Get all users in a server

Gets the list of members in a server.

- Require Authentication: true
- User must be a member of the server with the role "user", "admin", or "owner".
- Request

  - Method: GET
  -

### Edit a user role in a server

Update the user role in a server. Only server owners can update roles.

- Require Authentication: true
- Require Proper Authentication: true
- Request
  - Method: PUT
  - URL: /api/servers/:serverId/users/:userId
  - Body:

```json
{
  "role": "admin"
}
```

Successful Response when there is a logged in user that is the owner of the server

- Status Code: 202
- Headers:
  - Content-Type: application/json
- Body:

  ```json
  {
    "userId": 1,
    "role": "admin"
  }
  ```

### Remove a user from a server

## CHANNELS

### Get all server channels

Returns a list of all available channels within a server

-Require Authentication: true
-Request:
-Method: GET
-URL: /api/channels/:serverId
-Body: none

Successful response:

-Status Code: 200
-Headers:
-Content-Type: application/json
-Body:

```json
{
  "categoryName": {
    "channelId": {
      "name": "General",
      "private": "true"
    },

    "channelId": {
      "name": "Memes",
      "private": "false"
    }
  }
}
```

### Create a channel group

Create a new channel in server.

-Require Authentication: true
-Require Authorization: true

-

### Create a channel

### Edit a channel

### Delete a channel

## CHANNEL MESSAGES

### Get all messages

### Post a message

### Edit a message

### Delete a message

### React to a message

## DIRECT MESSAGES

### Get all user conversations

Returns a list of all users current user has a direct message conversation with

- Require Authentication: True
- Request

  - Method: GET
  - URL: /api/:userid/conversations
  - Headers:
    - Content-Type: application/json
  - Body: None

- Successful Response when there are conversations:
  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

  ```json
  {
    "user1": {
      "userId": 1,
      "userIcon": "something.com",
      "userStatus": "online",
      "createdAt": "mm/dd/yy",
      "updatedAt": "mm/dd/yy"
    },
    "user2": {
      "userId": 1,
      "userIcon": "somethingelse.com",
      "userStatus": "online",
      "createdAt": "mm/dd/yy",
      "updatedAt": "mm/dd/yy"
    }
  }
  ```
  - Successful Response when there are no conversations
    - Status Code: 200
    - Headers
      - Content-Type: application/json
    - Body:

    ```json
    {
      "user": []
    }
    ```

### Get all user conversation messages

Returns all messages in a specific user conversation

- Require Authentication: true
- Request
  - Method: GET
  - URL: /api/conversations/:conversationId/
  - Headers:
    - Content-Type: application/json
  - Body: None

- Successful Response when there are messages
  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "UserConversationId": {
        "messages": [
          {
            "text": "heyyyyyy",
            "userId": 1,
            "createdAt": "2021-01-01",
            "reactions": {
              "reactionId": {
                "username": "Demo-graphics",
                "emoji": "🙃"
              }
            }
          }
        ]
      }
    }
    ```
- Successful Response when there are no messages
  -Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "messages": []
    }
    ```

### Post a user conversation message

Create a new user conversation

- Require Authentication: true
- Request
  - Method: POST
  - URL: /api/conversations/:conversationId/messages
  - Body:

    ```json
      {
        "text": "heyyyyyy",
        "userId": 1
      }

    ```
- Successful Response
  - Status Code: 201
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
      {
        "id": 3,
        "text": "heyyyyyy",
        "userId": 1,
        "createdAt": "mm/dd/yy",
        "reactions": {}
      }
    ```

### Post a user conversation

Create a new user conversation

- Require Authentication: true
- Request
  - Method: POST
  - URL: /api/conversations
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "userId": 2
    }
    ```
- Successful Response if conversation doesn't already exist
  -Status Code: 201
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
      "user2": {
        "userId": 1,
        "userIcon": "default.jpg",
        "userStatus": "online",
        "createdAt": "mm/dd/yy",
        "updatedAt": "mm/dd/yy"
    }
    ```


### Delete a user conversation

Delete a specific user conversation

- Require Authentication: true
- Request
  - Method: DELETE
  - URL: /api/conversations/:conversationId
  - Body: None

- Successful Response
  - Status Code: 202
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Successfully deleted!"
    }
    ```


### Delete a user conversation message

Delete a specific message in a user conversation.

- Require Authentication: true
- Request
  - Method: DELETE
  -  URL: /api/conversations/:conversationId/messages/:messageId
- Body: None

- Successful Response
  - Status Code: 202
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
      "message": "Successfully deleted!"
    }
    ```

### React to a conversation
Add a reaction to a specific message in a user conversation

- Require Authentication: true
- Request
  -Method: POST
  - URL: /api/conversations/:conversationId/messages/:messageId/reactions
  -Headers:
    -Content-Type: application/json
  -Body:
    ```json
    {
      "emoji": "❤",
      "userId": 3
    }
    ```
- Successful Response
  - Status Code: 201
  - Header:
    - Content-Type: application/json
  -Body:

    ```json
        "<reactionId>": {
        "username": "Demo-graphics",
        "emoji": "🙃"
          }
    ```
